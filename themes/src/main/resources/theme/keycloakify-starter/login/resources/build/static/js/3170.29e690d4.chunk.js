"use strict";(self.webpackChunkkeycloakify_starter=self.webpackChunkkeycloakify_starter||[]).push([[3170],{9207:(e,s,t)=>{t.d(s,{d:()=>o,z:()=>c});var a=t(2791),n=t(2533),r=t(152),l=t(5442),i=t(184);const o=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(((e,s)=>{let{className:t,variant:a,size:r,asChild:c=!1,...d}=e;const u=c?n.g7:"button";return(0,i.jsx)(u,{className:(0,l.cn)(o({variant:a,size:r,className:t})),ref:s,...d})}));c.displayName="Button"},3478:(e,s,t)=>{t.d(s,{X:()=>o});var a=t(2791),n=t(2330),r=t(1928),l=t(5442),i=t(184);const o=a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,i.jsx)(n.fC,{ref:s,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,i.jsx)(n.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,i.jsx)(r.nQG,{className:"h-4 w-4"})})})}));o.displayName=n.fC.displayName},8777:(e,s,t)=>{t.d(s,{I:()=>l});var a=t(2791),n=t(5442),r=t(184);const l=a.forwardRef(((e,s)=>{let{className:t,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})}));l.displayName="Input"},532:(e,s,t)=>{t.d(s,{_:()=>c});var a=t(2791),n=t(3876),r=t(152),l=t(5442),i=t(184);const o=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,i.jsx)(n.f,{ref:s,className:(0,l.cn)(o(),t),...a})}));c.displayName=n.f.displayName},5824:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(2791),n=t(1713),r=t(5442),l=t(184);const i=a.forwardRef(((e,s)=>{let{className:t,orientation:a="horizontal",decorative:i=!0,...o}=e;return(0,l.jsx)(n.f,{ref:s,decorative:i,orientation:a,className:(0,r.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...o})}));i.displayName=n.f.displayName},5442:(e,s,t)=>{t.d(s,{cn:()=>r});var a=t(3733),n=t(2511);function r(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,a.W)(s))}},3170:(e,s,t)=>{t.r(s),t.d(s,{default:()=>q});var a=t(2791),n=t(7406);const{useI18n:r}=(0,n.Lv)({en:{loginAs:"Log in as",notYou:"Not You?"},zh_CN:{loginAs:"\u767b\u5f55\u4e3a",notYou:"\u4e0d\u662f\u4f60\uff1f"}});var l=t(8258),i=t(6055),o=t(7747),c=t(7107),d=t(1999),u=t(1928),m=t(5442),p=t(184);const f=d.fC,h=d.xz;d.ZA,d.Uv,d.Tr,d.Ee;a.forwardRef(((e,s)=>{let{className:t,inset:a,children:n,...r}=e;return(0,p.jsxs)(d.fF,{ref:s,className:(0,m.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",t),...r,children:[n,(0,p.jsx)(u.XCv,{className:"ml-auto h-4 w-4"})]})})).displayName=d.fF.displayName;a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)(d.tu,{ref:s,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})})).displayName=d.tu.displayName;const x=a.forwardRef(((e,s)=>{let{className:t,sideOffset:a=4,...n}=e;return(0,p.jsx)(d.Uv,{children:(0,p.jsx)(d.VY,{ref:s,sideOffset:a,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})}));x.displayName=d.VY.displayName;const g=a.forwardRef(((e,s)=>{let{className:t,inset:a,...n}=e;return(0,p.jsx)(d.ck,{ref:s,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",t),...n})}));g.displayName=d.ck.displayName;a.forwardRef(((e,s)=>{let{className:t,children:a,checked:n,...r}=e;return(0,p.jsxs)(d.oC,{ref:s,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[(0,p.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,p.jsx)(d.wU,{children:(0,p.jsx)(u.nQG,{className:"h-4 w-4"})})}),a]})})).displayName=d.oC.displayName;a.forwardRef(((e,s)=>{let{className:t,children:a,...n}=e;return(0,p.jsxs)(d.Rk,{ref:s,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,p.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,p.jsx)(d.wU,{children:(0,p.jsx)(u.jXb,{className:"h-4 w-4 fill-current"})})}),a]})})).displayName=d.Rk.displayName;a.forwardRef(((e,s)=>{let{className:t,inset:a,...n}=e;return(0,p.jsx)(d.__,{ref:s,className:(0,m.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...n})})).displayName=d.__.displayName;a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)(d.Z0,{ref:s,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",t),...a})})).displayName=d.Z0.displayName;var y=t(9207);const N=(0,t(152).j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),b=a.forwardRef(((e,s)=>{let{className:t,variant:a,...n}=e;return(0,p.jsx)("div",{ref:s,role:"alert",className:(0,m.cn)(N({variant:a}),t),...n})}));b.displayName="Alert";const j=a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)("h5",{ref:s,className:(0,m.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})}));j.displayName="AlertTitle";const v=a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)("div",{ref:s,className:(0,m.cn)("text-sm [&_p]:leading-relaxed",t),...a})}));v.displayName="AlertDescription";const w=a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)("div",{ref:s,className:(0,m.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...a})}));w.displayName="Card";a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)("div",{ref:s,className:(0,m.cn)("flex flex-col space-y-1.5 p-6",t),...a})})).displayName="CardHeader";a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)("h3",{ref:s,className:(0,m.cn)("font-semibold leading-none tracking-tight",t),...a})})).displayName="CardTitle";a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)("p",{ref:s,className:(0,m.cn)("text-sm text-muted-foreground",t),...a})})).displayName="CardDescription";const k=a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)("div",{ref:s,className:(0,m.cn)("p-6 pt-0",t),...a})}));k.displayName="CardContent";function C(e){const{displayInfo:s=!1,displayMessage:t=!0,displayRequiredFields:n=!1,displayWide:r=!1,showAnotherWayIfPresent:d=!0,headerNode:N,showUsernameNode:C=null,infoNode:A=null,kcContext:I,i18n:D,doUseDefaultCss:U,classes:S,children:R}=e,{getClassName:F}=(0,c.v)({doUseDefaultCss:U,classes:S}),{msg:T,changeLocale:z,labelBySupportedLanguageTag:L,currentLanguageTag:W}=D,{realm:H,locale:_,auth:O,url:B,message:P,isAppInitiatedAction:E}=I,{isReady:V}=(0,o.M)({doFetchDefaultThemeResources:U,styles:[],htmlClassName:F("kcHtmlClass"),bodyClassName:F("kcBodyClass")});return(0,a.useState)((()=>{document.title=D.msgStr("loginTitle",I.realm.displayName)})),V?(console.log(I),console.log(JSON.stringify(I)),(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"h-screen relative w-full overflow-hidden flex flex-col items-center justify-center",children:[H.internationalizationEnabled&&((0,l.h)(void 0!==_),!0)&&_.supported.length>1&&(0,p.jsxs)(f,{children:[(0,p.jsxs)(h,{className:(0,m.cn)("z-10",(0,y.d)({variant:"ghost"}),"absolute right-4 top-4 md:right-8 md:top-8"),children:[" ",L[W]]}),(0,p.jsx)(x,{children:_.supported.map((e=>{let{languageTag:s}=e;return(0,p.jsxs)(g,{onClick:()=>z(s),children:["  ",L[s]]})}))})]}),(0,p.jsxs)("div",{className:"absolute right-4 top-4 md:left-8 md:top-8 flex items-center z-20",children:[(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-6 w-6",children:(0,p.jsx)("path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"})}),T("loginTitleHtml",H.displayNameHtml)]}),(0,p.jsx)("div",{className:"container relative h-screen flex items-center justify-center md:grid lg:max-w-none lg:px-0",children:(0,p.jsx)("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 items-center",children:(0,p.jsx)(w,{id:"kc-content",className:"z-20 lg:px-8",children:(0,p.jsxs)(k,{id:"kc-content-wrapper",className:"flex flex-col min-[w]:350px ",children:[(0,p.jsx)("div",{className:"flex justify-center",children:(0,p.jsx)("h1",{className:"text-2xl font-semibold tracking-tight text-center mt-6 mb-3",id:"kc-page-title",children:N})}),void 0!==O&&O.showUsername&&(0,p.jsxs)("div",{className:"mt-3 mb-3 text-slate-500",children:[T("loginAs")," ",(0,p.jsx)("span",{className:"font-bold text-slate-950",children:null===O||void 0===O?void 0:O.attemptedUsername}),O.showResetCredentials&&(0,p.jsx)("a",{id:"reset-login",href:B.loginRestartFlowUrl,className:"text-sm items-center relative w-auto h-0 inline-block hover:underline ml-1",children:"(Not You?)"})]}),t&&void 0!==P&&("warning"!==P.type||!E)&&(0,p.jsxs)("div",{className:(0,i.W)("alert","alert-".concat(P.type)),children:["success"===P.type&&(0,p.jsx)("span",{className:F("kcFeedbackSuccessIcon")}),"warning"===P.type&&(0,p.jsx)("span",{className:F("kcFeedbackWarningIcon")}),"error"===P.type&&(0,p.jsxs)(b,{variant:"destructive",className:"mb-2",children:[(0,p.jsx)(u.LPM,{className:"h-4 w-4"}),(0,p.jsx)(j,{children:T("errorTitle")}),(0,p.jsx)(v,{children:P.summary})]}),"info"===P.type&&(0,p.jsx)("span",{className:F("kcFeedbackInfoIcon")})]}),R,void 0!==O&&O.showTryAnotherWayLink&&d&&(0,p.jsx)("form",{id:"kc-select-try-another-way-form",action:B.loginAction,method:"post",className:(0,i.W)(r&&F("kcContentWrapperClass")),children:(0,p.jsx)("div",{className:(0,i.W)(r&&[F("kcFormSocialAccountContentClass"),F("kcFormSocialAccountClass")]),children:(0,p.jsxs)("div",{className:F("kcFormGroupClass"),children:[(0,p.jsx)("input",{type:"hidden",name:"tryAnotherWay",value:"on"}),(0,p.jsx)("a",{href:"#",id:"try-another-way",onClick:()=>(document.forms["kc-select-try-another-way-form"].submit(),!1),children:T("doTryAnotherWay")})]})})}),s&&(0,p.jsx)("div",{id:"kc-info",className:F("kcSignUpClass"),children:(0,p.jsx)("div",{id:"kc-info-wrapper",className:F("kcInfoAreaWrapperClass"),children:A})})]})})})})]})})):null}a.forwardRef(((e,s)=>{let{className:t,...a}=e;return(0,p.jsx)("div",{ref:s,className:(0,m.cn)("flex items-center p-6 pt-0",t),...a})})).displayName="CardFooter";var A=t(8777),I=t(532);const D=new URL(window.location.href).searchParams.get("my_custom_param");function U(e){const{kcContext:s,i18n:t,doUseDefaultCss:a,Template:n,classes:r}=e,{getClassName:l}=(0,c.v)({doUseDefaultCss:a,classes:r}),{url:i,realm:o,auth:d}=s,{msg:u,msgStr:m}=t;return(0,p.jsx)(n,{kcContext:s,i18n:t,doUseDefaultCss:a,classes:r,displayMessage:!1,headerNode:u("emailForgotTitle"),infoNode:u("emailInstruction"),children:(0,p.jsx)("div",{className:"lg:p-8 lg:pb-4 flex gap-4",children:(0,p.jsxs)("div",{className:"mx-auto flex w-full flex-col justify-center sm:w-[350px] ",id:"kc-form-wrapper",children:[(0,p.jsxs)("form",{id:"kc-reset-password-form",className:"grid gap-3 items-center",action:i.loginAction,method:"post",children:[(0,p.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,p.jsxs)(I._,{htmlFor:"autoCompleteHelper",children:[" ",o.loginWithEmailAllowed?o.registrationEmailAsUsername?u("email"):u("usernameOrEmail"):u("username")]}),(0,p.jsx)(A.I,{type:"text",id:"username",name:"username",autoFocus:!0,defaultValue:void 0!==d&&d.showUsername?d.attemptedUsername:void 0})]}),(0,p.jsx)("div",{id:"kc-form-buttons",className:l("kcFormButtonsClass"),children:(0,p.jsx)(y.z,{className:"w-full",type:"submit",children:m("doSubmit")})})]}),(0,p.jsx)("div",{className:"text-sm mt-3 hover:underline text-slate-500",children:(0,p.jsx)("span",{children:(0,p.jsx)("a",{href:i.loginUrl,children:u("backToLogin")})})})]})})})}null!==D&&console.log("my_custom_param:",D);var S=t(969),R=t(3478),F=t(5824);const T=new URL(window.location.href).searchParams.get("my_custom_param");function z(e){const{kcContext:s,i18n:t,doUseDefaultCss:n,Template:r,classes:l}=e,{getClassName:o}=(0,c.v)({doUseDefaultCss:n,classes:l}),{social:d,realm:m,url:f,usernameHidden:h,login:x,auth:g,registrationDisabled:N}=s,{msg:b,msgStr:j}=t,[v,w]=(0,a.useState)(!1),k=(0,S.O)((e=>{var s;e.preventDefault(),w(!0);const t=e.target;null===(s=t.querySelector("input[name='email']"))||void 0===s||s.setAttribute("name","username"),t.submit()}));return(0,p.jsx)(r,{kcContext:s,i18n:t,doUseDefaultCss:n,classes:l,displayInfo:d.displayInfo,displayWide:m.password&&void 0!==d.providers,headerNode:b("doLogIn"),infoNode:m.password&&m.registrationAllowed&&!N&&(0,p.jsxs)("div",{id:"kc-registration",className:"justify-center items-center text-center",children:[(0,p.jsx)(F.Z,{className:"mb-3"}),(0,p.jsxs)("span",{className:"text-slate-500 text-sm",children:[b("noAccount")," "," ",(0,p.jsx)("a",{tabIndex:6,href:f.registrationUrl,className:"text-slate-950",children:b("doRegister")})]})]}),children:(0,p.jsxs)("div",{className:" flex gap-4",children:[(0,p.jsx)("div",{className:"mx-auto flex w-full flex-col justify-center sm:w-[350px] ",id:"kc-form-wrapper",children:m.password&&(0,p.jsxs)("form",{id:"kc-form-login",onSubmit:k,action:f.loginAction,method:"post",className:"grid gap-3 items-center",children:[(0,p.jsx)("div",{className:o("kcFormGroupClass"),children:!h&&(e=>{const s=m.loginWithEmailAllowed?m.registrationEmailAsUsername?"email":"usernameOrEmail":"username",t="usernameOrEmail"===s?"username":s;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(I._,{htmlFor:t,className:o("kcLabelClass"),children:b(s)}),(0,p.jsx)(A.I,{tabIndex:1,id:t,className:o("kcInputClass"),name:t,defaultValue:null!==(e=x.username)&&void 0!==e?e:"",type:"text",autoFocus:!0,autoComplete:"off"})]})})()}),(0,p.jsx)("div",{className:(0,i.W)(o("kcFormGroupClass"),o("kcFormSettingClass")),children:(0,p.jsx)("div",{id:"kc-form-options",children:m.rememberMe&&!h&&(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)(R.X,{tabIndex:3,id:"rememberMe",name:"rememberMe",defaultChecked:"on"===x.rememberMe}),(0,p.jsx)("label",{htmlFor:"rememberMe",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:b("rememberMe")})]})})}),(0,p.jsx)("div",{id:"kc-form-buttons",className:o("kcFormGroupClass"),children:(0,p.jsx)(y.z,{tabIndex:4,className:"w-full",name:"login",id:"kc-login",type:"submit",disabled:v,children:j("doLogIn")})})]})}),m.password&&void 0!==d.providers&&(0,p.jsxs)("div",{id:"kc-social-providers",className:"flex gap-4",children:[(0,p.jsx)(F.Z,{orientation:"vertical"}),(0,p.jsx)("ul",{className:"grid grid-cols-2 gap-2",children:d.providers.map((e=>(0,p.jsx)("li",{className:o("kcFormSocialAccountListLinkClass"),children:(0,p.jsxs)(y.z,{onClick:()=>window.open(e.loginUrl),id:"zocial-".concat(e.alias),className:"".concat((0,y.d)({variant:"secondary"})," w-full flex justify-start gap-2"),children:[(0,p.jsx)(u.wGg,{}),(0,p.jsx)("span",{children:e.displayName})]})},e.providerId)))})]})]})})}function L(e){var s;const{kcContext:t,i18n:n,doUseDefaultCss:r,Template:l,classes:i}=e,{getClassName:o}=(0,c.v)({doUseDefaultCss:r,classes:i}),{realm:d,url:u,login:m}=t,{msg:f,msgStr:h}=n,[x,g]=(0,a.useState)(!1),N=(0,S.O)((e=>{e.preventDefault(),g(!0);e.target.submit()}));return(0,p.jsx)(l,{kcContext:t,i18n:n,doUseDefaultCss:r,classes:i,headerNode:f("doLogIn"),children:(0,p.jsx)("div",{className:"flex gap-4",children:(0,p.jsxs)("div",{className:"mx-auto flex w-full flex-col justify-center sm:w-[350px] ",children:[(0,p.jsxs)("form",{id:"kc-form-login",onSubmit:N,action:u.loginAction,method:"post",className:"grid gap-3 items-center",children:[(0,p.jsxs)("div",{className:o("kcFormGroupClass"),children:[(0,p.jsx)(I._,{htmlFor:"password",className:o("kcLabelClass"),children:f("password")}),(0,p.jsx)(A.I,{tabIndex:2,id:"password",className:o("kcInputClass"),name:"password",type:"password",autoFocus:!0,autoComplete:"on",defaultValue:null!==(s=m.password)&&void 0!==s?s:""})]}),(0,p.jsx)("div",{id:"kc-form-buttons",className:o("kcFormGroupClass"),children:(0,p.jsx)(y.z,{tabIndex:4,className:"w-full",name:"login",id:"kc-login",type:"submit",disabled:x,children:h("doLogIn")})})]}),d.resetPasswordAllowed&&(0,p.jsx)("span",{className:"text-sm mt-3 text-slate-500",children:(0,p.jsx)("a",{tabIndex:5,href:u.loginResetCredentialsUrl,children:f("doForgotPassword")})})]})})})}null!==T&&console.log("my_custom_param:",T);var W=t(5526),H=t(9883),_=t(1742),O=t(9465);function B(e){const{kcContext:s,i18n:t,doUseDefaultCss:n,Template:r,classes:l}=e,{getClassName:o}=(0,c.v)({doUseDefaultCss:n,classes:l}),{url:d,attestationConveyancePrefrence:u,authenticatorAttachment:m,challenge:f,createTimeout:h,excludeCredentialsId:x,requireResidentKey:g,userid:y,username:N,signatureAlgorithms:b,userVerificationRequirement:j,rpEntityName:v,rpId:w,isSetRetry:k,isAppInitiatedAction:C}=s,{msg:A,msgStr:I}=t,[D,U]=(0,a.useState)(""),[R,F]=(0,a.useState)(""),[T,z]=(0,a.useState)(""),[L,B]=(0,a.useState)(""),[P,E]=(0,a.useState)(""),[V,M]=(0,a.useState)(""),G=(0,a.useRef)(null),[K,J]=(0,a.useState)(!1),Y=async()=>{const e=G.current;if(null===e)return await new Promise((e=>setTimeout(e,100))),Y();e.submit()},Z=(0,S.O)((async()=>{if(!window.PublicKeyCredential)return M("WebAuthn is not supported in this browser."),void(G.current&&G.current.submit());let e=q(b),s={name:v,id:w},t={challenge:W.tH.parse(f,{loose:!0}),rp:s,user:{id:W.tH.parse(y,{loose:!0}),name:N,displayName:N},pubKeyCredParams:e,attestation:"not specified"!==u?u:void 0},a={},n=!1;"not specified"!==m&&(a={authenticatorAttachment:m},n=!0),"not specified"!==g&&(a="Yes"===g?{...a,requireResidentKey:!0}:{...a,requireResidentKey:!1},n=!0),"not specified"!==j&&(a={...a,userVerification:j},n=!0),n&&(t={...t,authenticatorSelection:a}),0!==h&&(t={...t,timeout:1e3*h});let r=X(x);r&&0!==r.length&&(t={...t,excludeCredentials:r});try{const e=await navigator.credentials.create({publicKey:t});if(!e||"public-key"!==e.type)return;(0,H.h)((0,_.is)(e));const s=e.response,a=s.clientDataJSON,n=s.attestationObject;if((0,H.h)((0,O.z)(s,s.attestationObject instanceof ArrayBuffer),"response not an AuthenticatorAttestationResponse"),U(W.tH.stringify(new Uint8Array(a),{pad:!1})),F(W.tH.stringify(new Uint8Array(n),{pad:!1})),z(W.tH.stringify(new Uint8Array(e.rawId),{pad:!1})),"function"===typeof s.getTransports){let e=s.getTransports();e&&E(Q(e))}else console.log("Your browser is not able to recognize supported transport media for the authenticator.");let r="WebAuthn Authenticator (Default Label)",l=window.prompt("Please enter a label for your WebAuthn authenticator",r);null!==l&&""!==l&&B(l)}catch(l){M(String(l)),J(!0)}J(!0)})),q=e=>{let s=[];if(0===b.length){let e={type:"public-key",alg:-7};return s.push(e),s}for(let t of e)s.push({type:"public-key",alg:t});return s},X=e=>{let s=[];if(!e)return s;let t=e.split(",");for(let a of t)s.push({type:"public-key",id:W.tH.parse(a,{loose:!0})})},Q=e=>{if(""===e||e.constructor!==Array)return"";let s="";for(let t=0;t<e.length;t++)s+=e[t]+",";return s.slice(0,-1)};return(0,a.useEffect)((()=>{K&&(Y(),J(!1))}),[K]),(0,p.jsx)(r,{kcContext:s,i18n:t,doUseDefaultCss:n,classes:l,headerNode:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:o("kcWebAuthnDefaultIcon"),style:{marginRight:"5px"}}),A("webauthn-registration-title")]}),children:(0,p.jsxs)("div",{id:"kc-form-webauthn",className:o("kcFormClass"),children:[(0,p.jsxs)("form",{id:"kc-webauthn-settings-form",action:d.loginAction,ref:G,method:"post",className:o("kcFormClass"),children:[(0,p.jsx)("input",{type:"hidden",id:"clientDataJSON",name:"clientDataJSON",value:D}),(0,p.jsx)("input",{type:"hidden",id:"attestationObject",name:"attestationObject",value:R}),(0,p.jsx)("input",{type:"hidden",id:"publicKeyCredentialId",name:"publicKeyCredentialId",value:T}),(0,p.jsx)("input",{type:"hidden",id:"authenticatorLabel",name:"authenticatorLabel",value:L}),(0,p.jsx)("input",{type:"hidden",id:"transports",name:"transports",value:P}),(0,p.jsx)("input",{type:"hidden",id:"error",name:"error",value:V})]}),(0,p.jsx)("input",{type:"button",onClick:Z,value:I("doRegister"),id:"registerWebAuthn",className:(0,i.W)(o("kcButtonClass"),o("kcButtonPrimaryClass"),o("kcButtonBlockClass"),o("kcButtonLargeClass"))}),!k&&C&&(0,p.jsx)("form",{action:d.loginAction,className:o("kcFormClass"),children:(0,p.jsx)("button",{type:"submit",className:"".concat(o("kcButtonClass")," ").concat(o("kcButtonDefaultClass")," ").concat(o("kcButtonBlockClass")," ").concat(o("kcButtonLargeClass")),id:"cancelWebAuthnAIA",name:"cancel-aia",value:"true",children:A("doCancel")})})]})})}function P(e){const{kcContext:s,i18n:t,doUseDefaultCss:n,Template:r,classes:l}=e,{getClassName:o}=(0,c.v)({doUseDefaultCss:n,classes:l}),{url:d}=s,{msg:u,msgStr:m}=t,{authenticators:f,challenge:h,shouldDisplayAuthenticators:x,userVerification:g,rpId:N}=s,b=Number(s.createTimeout),j="true"==s.isUserIdentified,v=(0,a.useRef)(null),[w,k]=(0,a.useState)(""),C=async()=>{const e=v.current;if(null===e)return await new Promise((e=>setTimeout(e,100))),C();e.submit()},[A,I]=(0,a.useState)({});(0,a.useEffect)((()=>{null!=w&&A.authenticatorData&&(console.log(A),C())}),[A]);const D=(0,S.O)((async()=>{if(!j)return;const e=f.authenticators.map((e=>({id:W.tH.parse(e.credentialId,{loose:!0}),type:"public-key"})));if(!window.PublicKeyCredential)return k(m("webauthn-unsupported-browser-text")),void C();const s={rpId:N,challenge:W.tH.parse(h,{loose:!0})};0!==b&&(s.timeout=1e3*b),e.length&&(s.allowCredentials=e),"not specified"!==g&&(s.userVerification=g);try{const e=await navigator.credentials.get({publicKey:s});if(!e||"public-key"!=e.type)return;if((0,H.h)((0,_.is)(e)),!("authenticatorData"in e.response))return;const t=e.response,a=t.clientDataJSON;(0,H.h)((0,O.z)(t,"signature"in t&&t.authenticatorData instanceof ArrayBuffer),"response not an AuthenticatorAssertionResponse");const n=t.authenticatorData,r=t.signature;I({clientDataJSON:W.tH.stringify(new Uint8Array(a),{pad:!1}),authenticatorData:W.tH.stringify(new Uint8Array(n),{pad:!1}),signature:W.tH.stringify(new Uint8Array(r),{pad:!1}),credentialId:e.id,userHandle:W.tH.stringify(new Uint8Array(t.userHandle),{pad:!1})})}catch(t){k(String(t))}}));return(0,p.jsx)(r,{kcContext:s,i18n:t,doUseDefaultCss:n,classes:l,headerNode:u("webauthn-login-title"),children:(0,p.jsx)("div",{className:"flex gap-4 mb-3",children:(0,p.jsxs)("div",{className:"mx-auto flex w-full flex-col justify-center sm:w-[350px] ",id:"kc-form-wrapper",children:[(0,p.jsxs)("form",{id:"webauth",action:d.loginAction,ref:v,method:"post",children:[(0,p.jsx)("input",{type:"hidden",id:"clientDataJSON",name:"clientDataJSON",value:A.clientDataJSON}),(0,p.jsx)("input",{type:"hidden",id:"authenticatorData",name:"authenticatorData",value:A.authenticatorData}),(0,p.jsx)("input",{type:"hidden",id:"signature",name:"signature",value:A.signature}),(0,p.jsx)("input",{type:"hidden",id:"credentialId",name:"credentialId",value:A.credentialId}),(0,p.jsx)("input",{type:"hidden",id:"userHandle",name:"userHandle",value:A.userHandle}),(0,p.jsx)("input",{type:"hidden",id:"error",name:"error",value:A.error})]}),(0,p.jsxs)("div",{className:o("kcFormGroupClass"),children:[f&&(0,p.jsx)("form",{id:"authn_select",className:o("kcFormClass"),children:f.authenticators.map((e=>(0,p.jsx)("input",{type:"hidden",name:"authn_use_chk",value:e.credentialId},e.credentialId)))}),f&&x&&(0,p.jsxs)(p.Fragment,{children:[f.authenticators.length>1&&(0,p.jsx)("p",{className:o("kcSelectAuthListItemTitle"),children:u("webauthn-available-authenticators")}),(0,p.jsx)("div",{className:o("kcFormClass"),children:f.authenticators.map((e=>(0,p.jsxs)("div",{id:"kc-webauthn-authenticator",className:o("kcSelectAuthListItemClass"),children:[(0,p.jsx)("div",{className:o("kcSelectAuthListItemIconClass"),children:(0,p.jsx)("i",{className:(0,i.W)((()=>{const s=o(e.transports.iconClass);return s.includes(" ")?s:[s,o("kcWebAuthnDefaultIcon")]})(),o("kcSelectAuthListItemIconPropertyClass"))})}),(0,p.jsxs)("div",{className:o("kcSelectAuthListItemBodyClass"),children:[(0,p.jsx)("div",{id:"kc-webauthn-authenticator-label",className:o("kcSelectAuthListItemHeadingClass"),children:e.label}),e.transports&&e.transports.displayNameProperties.length&&(0,p.jsx)("div",{id:"kc-webauthn-authenticator-transport",className:o("kcSelectAuthListItemDescriptionClass"),children:e.transports.displayNameProperties.map(((s,t)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:u(s)}),t<e.transports.displayNameProperties.length-1&&(0,p.jsx)("span",{children:", "})]})))}),(0,p.jsxs)("div",{className:o("kcSelectAuthListItemDescriptionClass"),children:[(0,p.jsx)("span",{id:"kc-webauthn-authenticator-created-label",children:u("webauthn-createdAt-label")}),(0,p.jsx)("span",{id:"kc-webauthn-authenticator-created",children:e.createdAt})]})]}),(0,p.jsx)("div",{className:o("kcSelectAuthListItemFillClass")})]})))})]}),(0,p.jsx)("div",{id:"kc-form-buttons",className:o("kcFormButtonsClass"),children:(0,p.jsx)(y.z,{id:"authenticateWebAuthnButton",type:"button",onClick:D,autoFocus:!0,className:"w-full mt-3",children:m("webauthn-doAuthenticate")})})]})]})})})}const E=(0,a.lazy)((()=>t.e(575).then(t.bind(t,575)))),V=(0,a.lazy)((()=>t.e(9129).then(t.bind(t,9129)))),M=(0,a.lazy)((()=>Promise.all([t.e(5033),t.e(9025)]).then(t.bind(t,9025)))),G=(0,a.lazy)((()=>t.e(7169).then(t.bind(t,2754)))),K=(0,a.lazy)((()=>t.e(9074).then(t.bind(t,9074)))),J=(0,a.lazy)((()=>t.e(773).then(t.bind(t,773)))),Y=(0,a.lazy)((()=>t.e(2444).then(t.bind(t,2444)))),Z={kcHtmlClass:"my-root-class",kcHeaderWrapperClass:"my-color my-font"};function q(e){const{kcContext:s}=e,l=r({kcContext:s});return null===l?null:(0,p.jsx)(a.Suspense,{children:(()=>{switch(s.pageId){case"login.ftl":return(0,p.jsx)(E,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!1});case"login-username.ftl":return(0,p.jsx)(z,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!1});case"login-password.ftl":return(0,p.jsx)(L,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!1});case"login-reset-password.ftl":return(0,p.jsx)(U,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!1});case"register.ftl":return(0,p.jsx)(V,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!0});case"register-user-profile.ftl":return(0,p.jsx)(M,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!0});case"terms.ftl":return(0,p.jsx)(G,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!0});case"my-extra-page-1.ftl":return(0,p.jsx)(K,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!0});case"my-extra-page-2.ftl":return(0,p.jsx)(J,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!0});case"webauthn-authenticate.ftl":return(0,p.jsx)(P,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!0});case"webauthn-register.ftl":return(0,p.jsx)(B,{kcContext:s,i18n:l,Template:C,classes:Z,doUseDefaultCss:!0});case"info.ftl":return(0,p.jsx)(Y,{kcContext:s,i18n:l,classes:Z,Template:(0,a.lazy)((()=>t.e(3870).then(t.bind(t,3870)))),doUseDefaultCss:!0});default:return(0,p.jsx)(n.ZP,{kcContext:s,i18n:l,classes:Z,Template:C,doUseDefaultCss:!0})}})()})}}}]);
//# sourceMappingURL=3170.29e690d4.chunk.js.map